<!DOCTYPE html><html><head><meta charset="utf-8" /><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /><title>Grafana - Docs - Annotations</title><meta content="0; url=http://docs.grafana.org/reference/annotations" http-equiv="refresh" /><link href="http://docs.grafana.org/reference/annotations" rel="canonical" /><meta content="Torkel Ödegaard" name="author" /><meta content="width=device-width, initial-scale=1" name="viewport" /><meta content="Grafana, the graphite dashboard frontend, editor and graph composer" name="description" /><meta content="Grafana, Graphite, Dashboard, InfluxDB, OpenTSDB, Frontend, Metrics, Editor, Composer, Analytics, Graphana" name="keywords" /><link href="/assets/img/fav32.png" rel="icon" /><link href="/assets/stylesheets/all.css" media="screen" rel="stylesheet" type="text/css" /><link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700" media="screen" rel="stylesheet" type="text/css" /><link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" media="screen" rel="stylesheet" type="text/css" /><script src="/assets/javascripts/all.js" type="text/javascript"></script><meta content="Docs - Annotations" property="og:title" /><meta content="Grafana.org" property="og:site_name" /><meta content="website" property="og:type" /><meta content="http://grafana.org/assets/img/docs/nice_dashboard.png" property="og:image" /></head><body class="docs docs_features docs_features_annotations docs_features_annotations_index"><section class="nav"><div class="row"><nav class="top-bar" data-topbar="1"><ul class="title-area"><li class="name"><a href="/"><img class="no-shadow" height="35" src="/assets/img/logo_new_transparent_200x46.png" width="150px" /></a></li><li class="toggle-topbar menu-icon"><a href="#"><span></span></a></li></ul><section class="top-bar-section"><ul class="right"><li><a href="/features/">Features</a></li><li><a href="http://docs.grafana.org">Docs</a></li><li><a href="/community/">Community</a></li><li><a href="/blog/">Blog</a></li><li class="has-form"><a class="button round" href="http://play.grafana.org" target="_blank">Live Demo</a></li><li><a href="https://github.com/grafana/grafana" target="_blank" title="Go to github repository"><i class="fa fa-fw fa-github"></i></a</li><li class="has-form"><a class="button round" href="/download">Download</a></li></ul></section></nav></div></section><section class="main"><div class="row"><div class="large-3 medium-3 columns"><div class="sidebar"><nav><ul class="side-nav"><li class="heading">Installation</li><li><a href="/docs">Installation</a></li><li><a href="/docs/provisioning">Provisioning</a></li><li><a href="/docs#configuration">Configuration</a></li><li><a href="/docs/performance">Performance</a></li><li><a href="/docs/troubleshooting">Troubleshooting</a></li><li><a href="/docs/support">Support</a></li><li class="divider"></li><li class="heading">Feature guides</li><li><a href="/docs/features/intro">Getting Started</a></li><li><a href="/docs/features/graphing">Graphing</a></li><li><a href="/docs/features/annotations">Annotations</a></li><li><a href="/docs/features/time_range">Time range controls</a></li><li><a href="/docs/features/search">Search features</a></li><li><a href="/docs/features/templated_dashboards">Templated dashboards</a></li><li><a href="/docs/features/scripted_dashboards">Scripted dashboards</a></li><li><a href="/docs/features/playlist">Playlist</a></li><li><a href="/docs/features/export_import">Export & Import</a></li><li class="divider"></li><li class="heading">Metric queries</li><li><a href="/docs/features/graphite">Graphite</a></li><li><a href="/docs/features/influxdb">InfluxDB</a></li><li><a href="/docs/features/opentsdb">OpenTSDB</a></li><li class="divider"></li><li class="heading">Contributing</li><li><a href="/docs/contributing/cla.html">CLA</a></li><li><a href="https://github.com/grafana/grafana/blob/master/LICENSE.md">Licence (Apache 2.0)</a></li><li><a href="/docs/contributing/building_from_source.html">Building from source</a></li><li class="divider"></li><li><a href="/docs/screencasts">Screencasts</a></li></ul></nav><a class="button download expand" href="/download" style="margin-bottom: 0;">Download Grafana</a></div></div><div class="medium-9 columns image-shadows"><h1 id="annotations">Annotations</h1>

<p><img src="/assets/img/annotated_graph1.png" /></p>

<p>Annotations provide a way to mark points on the graph with rich events. When you hover over an annotation
you can get title, tags, and text information for the event.</p>

<p>To enable annotations open dashboard settings and the controls tab.
Under feature toggles you will find the checkbox for annotations.</p>

<p>When enabled they will appear in the sub menu controls area.
<img src="/assets/img/annotations_submenu1.png" /></p>

<p>Click the cog wheel to open the dialog where you can add &amp; edit annotations.
<img src="/assets/img/annotations_dialog1.png" /></p>

<h3 id="datasources">Datasources</h3>

<p>Grafana supports many data sources for annotation.</p>

<ul>
<li>Graphite metrics</li>
<li>Graphite events</li>
<li>InfluxDB query</li>
<li>Elasticsearch query</li>
</ul>

<h2 id="influxdb-annotations">InfluxDB Annotations</h2>

<p><img src="/assets/img/influxdb/influxdb_annotation.png" /></p>

<p>For InfluxDB you need to enter a query like in the above screenshot. You need to have the <code class="prettyprint">where $timeFilter</code> part.
If you only select one column you will not need to enter anything in the column mapping fields.
If you have multiple columns you need to specify which column should be treated as title, tags and text column.</p>

<h2 id="elasticsearch-annotations">Elasticsearch Annotations</h2>

<p><img src="/assets/img/docs/elasticsearch_annotations_edit.png" /></p>

<p>You can use the same data source as you specified in config.js for storing grafana dashboards or you can specify another one.
The annotation definition contains an index name that will override the index name specified in config.js. The index name can
be the name of an alias or an index wildcard pattern. You can leave the search query blank or specify a lucene query.</p>

<p>If your elasticsearch document has a timestamp field other than <code class="prettyprint">@timestamp</code> you will need to specify that. As well
as the name for the fields that should be used for the annotation title, tags and text. Tags and text are optional.</p>

<p><strong>The annotation timestamp field in elasticsearch need to be in UTC format</strong></p>
</div></div></section><div id="blueimp-gallery" class="blueimp-gallery blueimp-gallery-controls"><div class="slides"></div><h3 class="title"></h3><a class="prev">‹</a><a class="next">›</a><a class="close">×</a><a class="play-pause"></a><ol class="indicator"></ol></div><footer><section class="newsletter"><div class="row"><h1 class="text-center">Get notified of new releases</h1></div><div class="row"><div class="medium-10 large-6 columns medium-offset-1 large-offset-3"><form action="http://grafana.us8.list-manage.com/subscribe/post?u=2aeb5711db2aececc990be536&amp;id=5585d37ecc" class="validate" id="mc-embedded-subscribe-form" method="post" name="mc-embedded-subscribe-form" target="_blank"><div class="row collapse"><div class="medium-10 columns"><input class="email" id="mce-EMAIL" name="EMAIL" placeholder="email address" type="email" value="" /></div><div class="medium-2 columns"><input class="button postfix" id="mc-embedded-subscribe" name="subscribe" type="submit" value="Subscribe" /></div></div></form></div></div></section><div class="row text-center"><ul class="footer-social"><li><i class="fa fa-github"></i><a href="https://github.com/grafana/grafana/issues">issue tracker</a> on GitHub</li><li><i class="fa fa-comment"></i><a href="irc://chat.freenode.net/#grafana">#grafana</a> on freenode</li><li><i class="fa fa-twitter"></i><a href="http://twitter.com/grafana">@grafana</a> on Twitter</li><li><i class="fa fa-envelope"></i><a href="mailto:torkel@grafana.org">email</a></li></ul></div><div class="row copyright text-center">&copy; 2015 Torkel Ödegaard &amp; Coding Instinct AB<iframe allowtransparency="true" class="github-btn" frameborder="false" height="20" scrolling="0" src="http://ghbtns.com/github-btn.html?user=grafana&amp;repo=grafana&amp;type=watch&amp;count=true" title="Star on GitHub" width="100"></iframe><iframe allowtransparency="true" class="github-btn" frameborder="false" height="20" scrolling="0" src="http://ghbtns.com/github-btn.html?user=grafana&amp;repo=grafana&amp;type=fork&amp;count=true" title="Fork on GitHub" width="80"></iframe></div><div class="footer-bg"></div></footer><script type="text/javascript">(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-47280256-1', 'grafana.org');
ga('require', 'linkid', 'linkid.js');
ga('send', 'pageview', {
 'page': location.pathname + location.search  + location.hash,
});</script></body></html>