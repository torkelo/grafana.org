define(["./core","./var/pnum","./css/var/cssExpand","./css/var/isHidden","./css/defaultDisplay","./data/var/data_priv","./core/init","./effects/Tween","./queue","./css","./deferred","./traversing"],function(e,t,n,o,r,i){function a(){return setTimeout(function(){d=void 0}),d=e.now()}function s(e,t){var o,r=0,i={height:e};for(t=t?1:0;4>r;r+=2-t)o=n[r],i["margin"+o]=i["padding"+o]=e;return t&&(i.opacity=i.width=e),i}function u(e,t,n){for(var o,r=(y[t]||[]).concat(y["*"]),i=0,a=r.length;a>i;i++)if(o=r[i].call(n,t,e))return o}function c(t,n,a){var s,c,l,f,d,p,h,g,v=this,y={},x=t.style,w=t.nodeType&&o(t),b=i.get(t,"fxshow");a.queue||(d=e._queueHooks(t,"fx"),null==d.unqueued&&(d.unqueued=0,p=d.empty.fire,d.empty.fire=function(){d.unqueued||p()}),d.unqueued++,v.always(function(){v.always(function(){d.unqueued--,e.queue(t,"fx").length||d.empty.fire()})})),1===t.nodeType&&("height"in n||"width"in n)&&(a.overflow=[x.overflow,x.overflowX,x.overflowY],h=e.css(t,"display"),g="none"===h?i.get(t,"olddisplay")||r(t.nodeName):h,"inline"===g&&"none"===e.css(t,"float")&&(x.display="inline-block")),a.overflow&&(x.overflow="hidden",v.always(function(){x.overflow=a.overflow[0],x.overflowX=a.overflow[1],x.overflowY=a.overflow[2]}));for(s in n)if(c=n[s],m.exec(c)){if(delete n[s],l=l||"toggle"===c,c===(w?"hide":"show")){if("show"!==c||!b||void 0===b[s])continue;w=!0}y[s]=b&&b[s]||e.style(t,s)}else h=void 0;if(e.isEmptyObject(y))"inline"===("none"===h?r(t.nodeName):h)&&(x.display=h);else{b?"hidden"in b&&(w=b.hidden):b=i.access(t,"fxshow",{}),l&&(b.hidden=!w),w?e(t).show():v.done(function(){e(t).hide()}),v.done(function(){var n;i.remove(t,"fxshow");for(n in y)e.style(t,n,y[n])});for(s in y)f=u(w?b[s]:0,s,v),s in b||(b[s]=f.start,w&&(f.end=f.start,f.start="width"===s||"height"===s?1:0))}}function l(t,n){var o,r,i,a,s;for(o in t)if(r=e.camelCase(o),i=n[r],a=t[o],e.isArray(a)&&(i=a[1],a=t[o]=a[0]),o!==r&&(t[r]=a,delete t[o]),s=e.cssHooks[r],s&&"expand"in s){a=s.expand(a),delete t[r];for(o in a)o in t||(t[o]=a[o],n[o]=i)}else n[r]=i}function f(t,n,o){var r,i,s=0,c=v.length,f=e.Deferred().always(function(){delete p.elem}),p=function(){if(i)return!1;for(var e=d||a(),n=Math.max(0,m.startTime+m.duration-e),o=n/m.duration||0,r=1-o,s=0,u=m.tweens.length;u>s;s++)m.tweens[s].run(r);return f.notifyWith(t,[m,r,n]),1>r&&u?n:(f.resolveWith(t,[m]),!1)},m=f.promise({elem:t,props:e.extend({},n),opts:e.extend(!0,{specialEasing:{}},o),originalProperties:n,originalOptions:o,startTime:d||a(),duration:o.duration,tweens:[],createTween:function(n,o){var r=e.Tween(t,m.opts,n,o,m.opts.specialEasing[n]||m.opts.easing);return m.tweens.push(r),r},stop:function(e){var n=0,o=e?m.tweens.length:0;if(i)return this;for(i=!0;o>n;n++)m.tweens[n].run(1);return e?f.resolveWith(t,[m,e]):f.rejectWith(t,[m,e]),this}}),h=m.props;for(l(h,m.opts.specialEasing);c>s;s++)if(r=v[s].call(m,t,h,m.opts))return r;return e.map(h,u,m),e.isFunction(m.opts.start)&&m.opts.start.call(t,m),e.fx.timer(e.extend(p,{elem:t,anim:m,queue:m.opts.queue})),m.progress(m.opts.progress).done(m.opts.done,m.opts.complete).fail(m.opts.fail).always(m.opts.always)}var d,p,m=/^(?:toggle|show|hide)$/,h=new RegExp("^(?:([+-])=|)("+t+")([a-z%]*)$","i"),g=/queueHooks$/,v=[c],y={"*":[function(t,n){var o=this.createTween(t,n),r=o.cur(),i=h.exec(n),a=i&&i[3]||(e.cssNumber[t]?"":"px"),s=(e.cssNumber[t]||"px"!==a&&+r)&&h.exec(e.css(o.elem,t)),u=1,c=20;if(s&&s[3]!==a){a=a||s[3],i=i||[],s=+r||1;do u=u||".5",s/=u,e.style(o.elem,t,s+a);while(u!==(u=o.cur()/r)&&1!==u&&--c)}return i&&(s=o.start=+s||+r||0,o.unit=a,o.end=i[1]?s+(i[1]+1)*i[2]:+i[2]),o}]};return e.Animation=e.extend(f,{tweener:function(t,n){e.isFunction(t)?(n=t,t=["*"]):t=t.split(" ");for(var o,r=0,i=t.length;i>r;r++)o=t[r],y[o]=y[o]||[],y[o].unshift(n)},prefilter:function(e,t){t?v.unshift(e):v.push(e)}}),e.speed=function(t,n,o){var r=t&&"object"==typeof t?e.extend({},t):{complete:o||!o&&n||e.isFunction(t)&&t,duration:t,easing:o&&n||n&&!e.isFunction(n)&&n};return r.duration=e.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in e.fx.speeds?e.fx.speeds[r.duration]:e.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){e.isFunction(r.old)&&r.old.call(this),r.queue&&e.dequeue(this,r.queue)},r},e.fn.extend({fadeTo:function(e,t,n,r){return this.filter(o).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,n,o,r){var a=e.isEmptyObject(t),s=e.speed(n,o,r),u=function(){var n=f(this,e.extend({},t),s);(a||i.get(this,"finish"))&&n.stop(!0)};return u.finish=u,a||s.queue===!1?this.each(u):this.queue(s.queue,u)},stop:function(t,n,o){var r=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof t&&(o=n,n=t,t=void 0),n&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var n=!0,a=null!=t&&t+"queueHooks",s=e.timers,u=i.get(this);if(a)u[a]&&u[a].stop&&r(u[a]);else for(a in u)u[a]&&u[a].stop&&g.test(a)&&r(u[a]);for(a=s.length;a--;)s[a].elem!==this||null!=t&&s[a].queue!==t||(s[a].anim.stop(o),n=!1,s.splice(a,1));(n||!o)&&e.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var n,o=i.get(this),r=o[t+"queue"],a=o[t+"queueHooks"],s=e.timers,u=r?r.length:0;for(o.finish=!0,e.queue(this,t,[]),a&&a.stop&&a.stop.call(this,!0),n=s.length;n--;)s[n].elem===this&&s[n].queue===t&&(s[n].anim.stop(!0),s.splice(n,1));for(n=0;u>n;n++)r[n]&&r[n].finish&&r[n].finish.call(this);delete o.finish})}}),e.each(["toggle","show","hide"],function(t,n){var o=e.fn[n];e.fn[n]=function(e,t,r){return null==e||"boolean"==typeof e?o.apply(this,arguments):this.animate(s(n,!0),e,t,r)}}),e.each({slideDown:s("show"),slideUp:s("hide"),slideToggle:s("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,n){e.fn[t]=function(e,t,o){return this.animate(n,e,t,o)}}),e.timers=[],e.fx.tick=function(){var t,n=0,o=e.timers;for(d=e.now();n<o.length;n++)t=o[n],t()||o[n]!==t||o.splice(n--,1);o.length||e.fx.stop(),d=void 0},e.fx.timer=function(t){e.timers.push(t),t()?e.fx.start():e.timers.pop()},e.fx.interval=13,e.fx.start=function(){p||(p=setInterval(e.fx.tick,e.fx.interval))},e.fx.stop=function(){clearInterval(p),p=null},e.fx.speeds={slow:600,fast:200,_default:400},e});