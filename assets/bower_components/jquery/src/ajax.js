define(["./core","./var/rnotwhite","./ajax/var/nonce","./ajax/var/rquery","./core/init","./ajax/parseJSON","./ajax/parseXML","./deferred"],function(e,t,n,r){function i(n){return function(r,i){"string"!=typeof r&&(i=r,r="*");var o,a=0,s=r.toLowerCase().match(t)||[];if(e.isFunction(i))for(;o=s[a++];)"+"===o[0]?(o=o.slice(1)||"*",(n[o]=n[o]||[]).unshift(i)):(n[o]=n[o]||[]).push(i)}}function o(t,n,r,i){function o(u){var c;return a[u]=!0,e.each(t[u]||[],function(e,t){var u=t(n,r,i);return"string"!=typeof u||s||a[u]?s?!(c=u):void 0:(n.dataTypes.unshift(u),o(u),!1)}),c}var a={},s=t===v;return o(n.dataTypes[0])||!a["*"]&&o("*")}function a(t,n){var r,i,o=e.ajaxSettings.flatOptions||{};for(r in n)void 0!==n[r]&&((o[r]?t:i||(i={}))[r]=n[r]);return i&&e.extend(!0,t,i),t}function s(e,t,n){for(var r,i,o,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}function u(e,t,n,r){var i,o,a,s,u,c={},l=e.dataTypes.slice();if(l[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=l.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(a=c[u+" "+o]||c["* "+o],!a)for(i in c)if(s=i.split(" "),s[1]===o&&(a=c[u+" "+s[0]]||c["* "+s[0]])){a===!0?a=c[i]:c[i]!==!0&&(o=s[0],l.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(f){return{state:"parsererror",error:a?f:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}var c=/#.*$/,l=/([?&])_=[^&]*/,f=/^(.*?):[ \t]*([^\r\n]*)$/gm,d=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,p=/^(?:GET|HEAD)$/,h=/^\/\//,m=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,g={},v={},y="*/".concat("*"),x=window.location.href,b=m.exec(x.toLowerCase())||[];return e.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:x,type:"GET",isLocal:d.test(b[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":y,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":e.parseJSON,"text xml":e.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,n){return n?a(a(t,e.ajaxSettings),n):a(e.ajaxSettings,t)},ajaxPrefilter:i(g),ajaxTransport:i(v),ajax:function(i,a){function d(t,n,r,i){var o,a,c,l,f,d=n;2!==P&&(P=2,k&&clearTimeout(k),w=void 0,C=i||"",$.readyState=t>0?4:0,o=t>=200&&300>t||304===t,r&&(l=s(j,$,r)),l=u(j,l,$,o),o?(j.ifModified&&(f=$.getResponseHeader("Last-Modified"),f&&(e.lastModified[T]=f),f=$.getResponseHeader("etag"),f&&(e.etag[T]=f)),204===t||"HEAD"===j.type?d="nocontent":304===t?d="notmodified":(d=l.state,a=l.data,c=l.error,o=!c)):(c=d,(t||!d)&&(d="error",0>t&&(t=0))),$.status=t,$.statusText=(n||d)+"",o?q.resolveWith(L,[a,d,$]):q.rejectWith(L,[$,d,c]),$.statusCode(O),O=void 0,S&&A.trigger(o?"ajaxSuccess":"ajaxError",[$,j,o?a:c]),H.fireWith(L,[$,d]),S&&(A.trigger("ajaxComplete",[$,j]),--e.active||e.event.trigger("ajaxStop")))}"object"==typeof i&&(a=i,i=void 0),a=a||{};var w,T,C,E,k,N,S,D,j=e.ajaxSetup({},a),L=j.context||j,A=j.context&&(L.nodeType||L.jquery)?e(L):e.event,q=e.Deferred(),H=e.Callbacks("once memory"),O=j.statusCode||{},M={},F={},P=0,R="canceled",$={readyState:0,getResponseHeader:function(e){var t;if(2===P){if(!E)for(E={};t=f.exec(C);)E[t[1].toLowerCase()]=t[2];t=E[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===P?C:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return P||(e=F[n]=F[n]||e,M[e]=t),this},overrideMimeType:function(e){return P||(j.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>P)for(t in e)O[t]=[O[t],e[t]];else $.always(e[$.status]);return this},abort:function(e){var t=e||R;return w&&w.abort(t),d(0,t),this}};if(q.promise($).complete=H.add,$.success=$.done,$.error=$.fail,j.url=((i||j.url||x)+"").replace(c,"").replace(h,b[1]+"//"),j.type=a.method||a.type||j.method||j.type,j.dataTypes=e.trim(j.dataType||"*").toLowerCase().match(t)||[""],null==j.crossDomain&&(N=m.exec(j.url.toLowerCase()),j.crossDomain=!(!N||N[1]===b[1]&&N[2]===b[2]&&(N[3]||("http:"===N[1]?"80":"443"))===(b[3]||("http:"===b[1]?"80":"443")))),j.data&&j.processData&&"string"!=typeof j.data&&(j.data=e.param(j.data,j.traditional)),o(g,j,a,$),2===P)return $;S=e.event&&j.global,S&&0===e.active++&&e.event.trigger("ajaxStart"),j.type=j.type.toUpperCase(),j.hasContent=!p.test(j.type),T=j.url,j.hasContent||(j.data&&(T=j.url+=(r.test(T)?"&":"?")+j.data,delete j.data),j.cache===!1&&(j.url=l.test(T)?T.replace(l,"$1_="+n++):T+(r.test(T)?"&":"?")+"_="+n++)),j.ifModified&&(e.lastModified[T]&&$.setRequestHeader("If-Modified-Since",e.lastModified[T]),e.etag[T]&&$.setRequestHeader("If-None-Match",e.etag[T])),(j.data&&j.hasContent&&j.contentType!==!1||a.contentType)&&$.setRequestHeader("Content-Type",j.contentType),$.setRequestHeader("Accept",j.dataTypes[0]&&j.accepts[j.dataTypes[0]]?j.accepts[j.dataTypes[0]]+("*"!==j.dataTypes[0]?", "+y+"; q=0.01":""):j.accepts["*"]);for(D in j.headers)$.setRequestHeader(D,j.headers[D]);if(j.beforeSend&&(j.beforeSend.call(L,$,j)===!1||2===P))return $.abort();R="abort";for(D in{success:1,error:1,complete:1})$[D](j[D]);if(w=o(v,j,a,$)){$.readyState=1,S&&A.trigger("ajaxSend",[$,j]),j.async&&j.timeout>0&&(k=setTimeout(function(){$.abort("timeout")},j.timeout));try{P=1,w.send(M,d)}catch(I){if(!(2>P))throw I;d(-1,I)}}else d(-1,"No Transport");return $},getJSON:function(t,n,r){return e.get(t,n,r,"json")},getScript:function(t,n){return e.get(t,void 0,n,"script")}}),e.each(["get","post"],function(t,n){e[n]=function(t,r,i,o){return e.isFunction(r)&&(o=o||i,i=r,r=void 0),e.ajax({url:t,type:n,dataType:o,data:r,success:i})}}),e});