define(["../core","../var/rnotwhite","./accepts"],function(e,t){function n(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=e.expando+n.uid++}return n.uid=1,n.accepts=e.acceptData,n.prototype={key:function(t){if(!n.accepts(t))return 0;var i={},r=t[this.expando];if(!r){r=n.uid++;try{i[this.expando]={value:r},Object.defineProperties(t,i)}catch(o){i[this.expando]=r,e.extend(t,i)}}return this.cache[r]||(this.cache[r]={}),r},set:function(t,n,i){var r,o=this.key(t),s=this.cache[o];if("string"==typeof n)s[n]=i;else if(e.isEmptyObject(s))e.extend(this.cache[o],n);else for(r in n)s[r]=n[r];return s},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(t,n,i){var r;return void 0===n||n&&"string"==typeof n&&void 0===i?(r=this.get(t,n),void 0!==r?r:this.get(t,e.camelCase(n))):(this.set(t,n,i),void 0!==i?i:n)},remove:function(n,i){var r,o,s,a=this.key(n),c=this.cache[a];if(void 0===i)this.cache[a]={};else{e.isArray(i)?o=i.concat(i.map(e.camelCase)):(s=e.camelCase(i),i in c?o=[i,s]:(o=s,o=o in c?[o]:o.match(t)||[])),r=o.length;for(;r--;)delete c[o[r]]}},hasData:function(t){return!e.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}},n});