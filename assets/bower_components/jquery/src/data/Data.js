define(["../core","../var/rnotwhite","./accepts"],function(t,e){function n(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=t.expando+n.uid++}return n.uid=1,n.accepts=t.acceptData,n.prototype={key:function(e){if(!n.accepts(e))return 0;var r={},i=e[this.expando];if(!i){i=n.uid++;try{r[this.expando]={value:i},Object.defineProperties(e,r)}catch(o){r[this.expando]=i,t.extend(e,r)}}return this.cache[i]||(this.cache[i]={}),i},set:function(e,n,r){var i,o=this.key(e),a=this.cache[o];if("string"==typeof n)a[n]=r;else if(t.isEmptyObject(a))t.extend(this.cache[o],n);else for(i in n)a[i]=n[i];return a},get:function(t,e){var n=this.cache[this.key(t)];return void 0===e?n:n[e]},access:function(e,n,r){var i;return void 0===n||n&&"string"==typeof n&&void 0===r?(i=this.get(e,n),void 0!==i?i:this.get(e,t.camelCase(n))):(this.set(e,n,r),void 0!==r?r:n)},remove:function(n,r){var i,o,a,s=this.key(n),u=this.cache[s];if(void 0===r)this.cache[s]={};else{t.isArray(r)?o=r.concat(r.map(t.camelCase)):(a=t.camelCase(r),r in u?o=[r,a]:(o=a,o=o in u?[o]:o.match(e)||[])),i=o.length;for(;i--;)delete u[o[i]]}},hasData:function(e){return!t.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}},n});