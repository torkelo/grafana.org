define(["../core","./support","../core/init"],function(e,t){var n=/\r/g;e.fn.extend({val:function(t){var i,r,o,s=this[0];{if(arguments.length)return o=e.isFunction(t),this.each(function(n){var r;1===this.nodeType&&(r=o?t.call(this,n,e(this).val()):t,null==r?r="":"number"==typeof r?r+="":e.isArray(r)&&(r=e.map(r,function(e){return null==e?"":e+""})),i=e.valHooks[this.type]||e.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&void 0!==i.set(this,r,"value")||(this.value=r))});if(s)return i=e.valHooks[s.type]||e.valHooks[s.nodeName.toLowerCase()],i&&"get"in i&&void 0!==(r=i.get(s,"value"))?r:(r=s.value,"string"==typeof r?r.replace(n,""):null==r?"":r)}}}),e.extend({valHooks:{option:{get:function(t){var n=e.find.attr(t,"value");return null!=n?n:e.trim(e.text(t))}},select:{get:function(n){for(var i,r,o=n.options,s=n.selectedIndex,a="select-one"===n.type||0>s,c=a?null:[],l=a?s+1:o.length,u=0>s?l:a?s:0;l>u;u++)if(r=o[u],(r.selected||u===s)&&(t.optDisabled?!r.disabled:null===r.getAttribute("disabled"))&&(!r.parentNode.disabled||!e.nodeName(r.parentNode,"optgroup"))){if(i=e(r).val(),a)return i;c.push(i)}return c},set:function(t,n){for(var i,r,o=t.options,s=e.makeArray(n),a=o.length;a--;)r=o[a],(r.selected=e.inArray(r.value,s)>=0)&&(i=!0);return i||(t.selectedIndex=-1),s}}}}),e.each(["radio","checkbox"],function(){e.valHooks[this]={set:function(t,n){return e.isArray(n)?t.checked=e.inArray(e(t).val(),n)>=0:void 0}},t.checkOn||(e.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})});